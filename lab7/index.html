<!DOCTYPE html>
<html>
<body>
<canvas id="c" width="800" height="600">
<script>
const canvas = document.getElementById("c");
var ctx = canvas.getContext("2d");

// road contants
const segment_height = 40;

// player constants
const player_height = 40;

// player globals
var player_pos_x = canvas.clientWidth / 8;
var player_pos_y = canvas.clientHeight - segment_height - player_height;

function draw_road(road_pos_x) {
    const segment_width = 100;
    const road_velocity = 2;
    const road_pos_y = canvas.clientHeight - segment_height;
    const num_of_segments = (canvas.clientWidth / segment_width) + 1;

    ctx.fillStyle="white";
    for (var i = 0; i < num_of_segments; ++i) {
        ctx.fillStyle = (ctx.fillStyle == "#ffffff") ? "red" : "white";
        ctx.fillRect(road_pos_x + (segment_width * i), road_pos_y, segment_width, segment_height);
    }
    if (road_pos_x <= -segment_width)
        road_pos_x += segment_width * 2;
    requestAnimationFrame(()=>{
        draw_road(road_pos_x - road_velocity);
    });
}

function draw_background() {
    ctx.fillStyle = "blue";
    ctx.fillRect(0, 0, canvas.clientWidth, canvas.clientHeight);
    requestAnimationFrame(()=>{
        draw_background();
    })
}

function draw_player() {
    const player_width = 150;
    ctx.fillStyle = "green";
    ctx.fillRect(player_pos_x, player_pos_y, player_width, player_height);
    requestAnimationFrame(()=>{
        draw_player();
    })
}

requestAnimationFrame(()=>{
    draw_background();
    draw_road(0);
    draw_player();
});
</script>
</canvas>
</body>
</html>